{% extends "base/base.html" %}

{% block Inputcontent %}
    <div class="post-box">
        <form method="post" action="{% url 'home' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <textarea name="content" placeholder="What's on your mind?" required></textarea>
            <input type="file" name="image" accept="image/*">
            <button type="submit">Post</button>
        </form>
    </div>
{% endblock %}
{% block content %}
    <div>
        {% for post in posts %}
            <div class="post">
                <h2>{{ post.author.username }}</h2>
                <p>{{ post.date_created }}</p>
                <p>{{ post.content }}</p>
                <a href="{% url "post_detail" post.id %}">
                    {% if post.image %}
                        <img src="{{ post.image.url }}" alt="Post Image" style="max-width: 300px;">
                    {% endif %}
                </a>
                {% comment %} <h3>Comments:</h3>
                {% for comment in post.comments.all %}
                    <div id="comment-{{ comment.id }}">
                        <p><strong>{{ comment.author.username }}:</strong> {{ comment.content }}</p>
                    </div>
                {% endfor %}

                <!-- Form thêm bình luận -->
                <form method="post" action="{% url 'add_comment' post.id %}">
                    {% csrf_token %}
                    <textarea name="content" placeholder="Add a comment" required></textarea>
                    <button type="submit">Comment</button>
                </form> {% endcomment %}
                {% comment %} <div id="comment-section">
                    <h3>Comments:</h3>
                    <!-- Form thêm bình luận -->
                    <form id="comment-form">
                        {% csrf_token %}    
                        <input type="hidden" id="post_id" value="{{ post.id }}">
                        <textarea id="content" placeholder="Add a comment..." required></textarea>
                        <button type="submit">Comment</button>
                    </form>
                    <ul id="comment-list">
                        <!-- Bình luận sẽ được thêm vào đây bằng JavaScript -->
                    </ul>
                </div> {% endcomment %}
            </div>
            <hr>
        {% endfor %}
    </div>
{% endblock %}