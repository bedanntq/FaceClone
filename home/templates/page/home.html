{% extends "base/base.html" %}

{% block Inputcontent %}
    <div class="post-box">
        <form method="post" action="{% url 'home' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <textarea name="content" placeholder="What's on your mind?" required></textarea>
            <input type="file" name="image" accept="image/*">
            <button type="submit">Post</button>
        </form>
    </div>
{% endblock %}
{% block content %}
    <div>
        {% for post in posts %}
            <div class="post">
                <h2>{{ post.author.username }}</h2>
                <p>{{ post.date_created }}</p>
                <p>{{ post.content }}</p>
                <a href="{% url "post_detail" post.id %}">
                    {% if post.image %}
                        <img src="{{ post.image.url }}" alt="Post Image" style="max-width: 300px;">
                    {% endif %}
                </a>
                <h3>Comments:</h3>
                {% for comment in post.comments.all %}
                    <div id="comment-{{ comment.id }}">
                        <p><strong>{{ comment.author.username }}:</strong> {{ comment.content }}</p>
                    </div>
                {% endfor %}

                <!-- Form th√™m b√¨nh lu·∫≠n -->
                <form method="post" action="{% url 'add_comment' post.id %}">
                    {% csrf_token %}
                    <textarea name="content" placeholder="Add a comment" required></textarea>
                    <button type="submit">Comment</button>
                </form>
            </div>
            <hr>
        {% endfor %}
    </div>
{% endblock %}
{% comment %} {% block content %}
    <div class="post-box">
        <form method="post" action="{% url 'home' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <textarea name="content" placeholder="What's on your mind?" required></textarea>
            <input type="file" name="image" accept="image/*">
            <button type="submit">Post</button>
        </form>
    </div>
    <div>
        {% for post in posts %}
            <div id="post_{{ post.id }}" class="post">
                <h2>{{ post.author.username }}</h2>
                <p>{{ post.date_created }}</p>
                <p>{{ post.content }}</p>
                {% if post.image %}
                    <!-- Th√™m onClick ƒë·ªÉ m·ªü modal -->
                    <img src="{{ post.image.url }}" alt="Post Image" style="max-width: 300px; cursor: pointer;" 
                        onclick="openModal('{{ post.id }}', '{{ post.image.url }}', '{{ post.content }}', '{{ post.author.username }}')">
                {% endif %}

                <h3>Comments:</h3>
                {% for comment in post.comments.all %}
                    <div id="comment-{{ comment.id }}">
                        <p><strong>{{ comment.author.username }}:</strong> {{ comment.content }}</p>
                    </div>
                {% endfor %}

                <!-- Form th√™m b√¨nh lu·∫≠n -->
                <form method="post" action="{% url 'add_comment' post.id %}">
                    {% csrf_token %}
                    <textarea name="content" placeholder="Add a comment" required></textarea>
                    <button type="submit">Comment</button>
                </form>
            </div>
            <hr>
        {% endfor %}
    </div>
{% endblock %} {% endcomment %}

{% comment %} {% block modal_post %}
    <!-- Modal hi·ªÉn th·ªã ·∫£nh v√† th√¥ng tin -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <h3 id="modalAuthor"></h3>
            <p id="modalContent"></p>
            <img id="modalImage" src="" alt="Modal Image" style="max-width: 100%;">
            <!-- T∆∞∆°ng t√°c -->
            <div class="interaction">
                <button>‚ù§Ô∏è Th√≠ch</button>
                <button>üí¨ B√¨nh lu·∫≠n</button>
                <button>üîó Chia s·∫ª</button>
            </div>
        </div>
    </div>
{% endblock %} {% endcomment %}
